import{S as t,i as e,s,e as a,t as o,c as n,b as l,f as i,g as r,F as c,j as h,k as d,l as u,a as f,v as g,d as m,h as p,G as v,H as E,I as b,n as w,J as x,K as T,y,B as I,L as N,M as S}from"./client.b65ad4af.js";function H(t){let e,s,f=A(t[1])+"";return{c(){e=a("h5"),s=o(f),this.h()},l(t){e=n(t,"H5",{style:!0});var a=l(e);s=i(a,f),a.forEach(r),this.h()},h(){c(e,"margin-top","20px"),c(e,"color","red")},m(t,a){h(t,e,a),d(e,s)},p(t,e){2&e&&f!==(f=A(t[1])+"")&&u(s,f)},d(t){t&&r(e)}}}function _(t){let e,s,x,T,y,I,N,S,_,j,k,B,C,L,R,U,D,F,G,J,K=A(t[1]).length>0;document.title=e="New Solution for Test "+t[0];let M=K&&H(t);return{c(){s=f(),x=a("h1"),T=o("New solution for "),y=a("a"),I=o("test "),N=o(t[0]),_=f(),j=a("h4"),k=o("Code"),B=f(),C=a("textarea"),L=f(),R=a("div"),M&&M.c(),U=f(),D=a("button"),F=o("add solution"),this.h()},l(e){g('[data-svelte="svelte-88ih38"]',document.head).forEach(r),s=m(e),x=n(e,"H1",{});var a=l(x);T=i(a,"New solution for "),y=n(a,"A",{href:!0});var o=l(y);I=i(o,"test "),N=i(o,t[0]),o.forEach(r),a.forEach(r),_=m(e),j=n(e,"H4",{style:!0});var c=l(j);k=i(c,"Code"),c.forEach(r),B=m(e),C=n(e,"TEXTAREA",{style:!0}),l(C).forEach(r),L=m(e),R=n(e,"DIV",{});var h=l(R);M&&M.l(h),U=m(h),D=n(h,"BUTTON",{disabled:!0});var d=l(D);F=i(d,"add solution"),d.forEach(r),h.forEach(r),this.h()},h(){p(y,"href",S="/test?id="+t[0]),c(j,"margin-top","20px"),c(C,"width","100%"),c(C,"height","200px"),D.disabled=G=0!=A(t[1]).length},m(e,a,o){h(e,s,a),h(e,x,a),d(x,T),d(x,y),d(y,I),d(y,N),h(e,_,a),h(e,j,a),d(j,k),h(e,B,a),h(e,C,a),v(C,t[1]),h(e,L,a),h(e,R,a),M&&M.m(R,null),d(R,U),d(R,D),d(D,F),o&&E(J),J=[b(C,"input",t[5]),b(D,"click",t[6])]},p(t,[s]){1&s&&e!==(e="New Solution for Test "+t[0])&&(document.title=e),1&s&&u(N,t[0]),1&s&&S!==(S="/test?id="+t[0])&&p(y,"href",S),2&s&&v(C,t[1]),2&s&&(K=A(t[1]).length>0),K?M?M.p(t,s):(M=H(t),M.c(),M.m(R,U)):M&&(M.d(1),M=null),2&s&&G!==(G=0!=A(t[1]).length)&&(D.disabled=G)},i:w,o:w,d(t){t&&r(s),t&&r(x),t&&r(_),t&&r(j),t&&r(B),t&&r(C),t&&r(L),t&&r(R),M&&M.d(),E(J)}}}function A(t){return 0==t.length?"code is missing":t.length>8192?`code is too long: ${t.length} > 8192`:""}function j(t,e,s){let a,o=null;const n=x(localStorage.getItem("scode")||"");T(t,n,t=>s(1,a=t)),n.subscribe(t=>localStorage.setItem("scode",t));let l=0;async function i(){200==(await N(o,"create_solution",{test_code_id:l,code:a})).status&&(n.set(""),S("/test?id="+l+"&page=0"))}y(()=>{o=I();const t=new URL(location);s(0,l=parseInt(t.searchParams.get("test_id")))});return[l,a,n,i,o,function(){a=this.value,n.set(a)},()=>i()]}export default class extends t{constructor(t){super(),e(this,t,j,_,s,{})}}
